{% extends 'base.html' %}
{% load static %}
{% block content %}

<!-- Modern Creative Navbar -->
<nav class="navbar navbar-expand-lg fixed-top custom-navbar shadow-sm bg-white">
  <div class="container">
    <a class="navbar-brand fw-bold" href="#">
      <span class="logo-gradient">MyPortfolio</span>
    </a>
    <button class="navbar-toggler custom-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto align-items-center">
        <li class="nav-item"><a class="nav-link cool-link" href="#about">About</a></li>
        <li class="nav-item"><a class="nav-link cool-link" href="#skills">Skills</a></li>
        <li class="nav-item"><a class="nav-link cool-link" href="#work">Work</a></li>
        <li class="nav-item"><a class="nav-link cool-link" href="#services">Services</a></li>
        <li class="nav-item"><a class="nav-link cool-link" href="#contact">Contact</a></li>
        <li class="nav-item ms-3">
          <a href="#contact" class="btn btn-glass px-3">Hire Me</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Hero / Profile Section -->
<header id="home" class="hero-section d-flex align-items-center justify-content-center" 
        style="min-height:100vh; background:linear-gradient(to right, #f8f9fa, #ffffff); padding-top:70px;">
  <div class="hero-box text-center" style="max-width:600px;">
    
    <!-- Profile Image -->
    <div class="profile-circle mb-3" 
         style="width:180px; height:180px; border-radius:50%; overflow:hidden; margin:0 auto; 
                box-shadow:0 8px 20px rgba(0,0,0,0.2);">
      {% if profile.profile_image %}
      <img src="{{ profile.profile_image.url }}" alt="{{ profile.name }}" 
           style="width:100%; height:100%; object-fit:cover; display:block;">
      {% else %}
      <img src="{% static 'img/abhaya.jpg' %}" alt="Profile"
           style="width:100%; height:100%; object-fit:cover; display:block;">
      {% endif %}
    </div>
    
    <!-- Heading -->
    <h1 class="fw-bold mb-2" style="font-weight:700; margin-bottom:0.5rem;">
      Hi, I'm 
      <span style="background:linear-gradient(45deg,#007bff,#6610f2); -webkit-background-clip:text; -webkit-text-fill-color:transparent;">
        {{ profile.name }}
      </span>
    </h1>
    
    <!-- Typing effect -->
    <p class="lead fw-semibold text-dark" style="font-weight:600; color:#333;">
      <span id="typed-text"></span>
      <span class="cursor" style="display:inline-block; width:2px; background-color:#333; margin-left:3px; animation:blink 0.7s infinite;">|</span>
    </p>
    
  </div>
</header>


<!-- about -->
<section id="about" class="py-5" style="padding:60px 0; background:#f8f9fa;">
  <div class="container bg-white rounded shadow p-5" style="max-width:1000px; border-radius:20px;">
    <div class="row align-items-center">
      
      <!-- Profile Image -->
      <div class="col-md-4 text-center mb-4 mb-md-0">
        <div class="profile-rectangle" 
             style="width:220px; height:260px; border-radius:16px; overflow:hidden; margin:0 auto;
                    box-shadow:0 8px 20px rgba(0,0,0,0.15);">
          {% if profile.profile_image %}
          <img src="{{ profile.profile_image.url }}" alt="{{ profile.name }}"
               style="width:100%; height:100%; object-fit:cover;">
          {% else %}
          <img src="{% static 'img/abhaya.jpg' %}" alt="Profile"
               style="width:100%; height:100%; object-fit:cover;">
          {% endif %}
        </div>
      </div>
      
      <!-- About Content -->
      <div class="col-md-8">
        <h2 class="fw-bold mb-3" style="font-size:2rem;">About Me</h2>
        <p class="lead" style="font-size:1.1rem; color:#444;">
          {{ profile.bio }}
        </p>
      </div>
      
    </div>
  </div>
</section>


<!-- Work / Projects Section -->
<section id="work" class="py-5">
  <div class="container bg-white rounded shadow p-5">
    <div class="text-center mb-5">
      <h2 class="fw-bold">My Work</h2>
      <p class="text-muted">Some projects I have worked on</p>
    </div>
    <div class="row g-4">
      {% for project in projects %}
      <div class="col-md-4">
        <a href="{{ project.link|default:'#' }}" class="text-decoration-none text-dark">
          <div class="card project-card shadow-lg h-100 hover-scale">
            {% if project.image %}
            <img src="{{ project.image.url }}" class="card-img-top" alt="{{ project.title }}">
            {% else %}
            <img src="{% static 'img/abhaya.jpg' %}" class="card-img-top" alt="Project">
            {% endif %}
            <div class="card-body">
              <h5 class="card-title">{{ project.title }}</h5>
              <p class="card-text">{{ project.description }}</p>
            </div>
          </div>
        </a>
      </div>
      {% empty %}
      <p class="text-center">No projects added yet.</p>
      {% endfor %}
    </div>
  </div>
</section>


<!-- Services Section -->
<section id="services" class="py-5 bg-light">
  <div class="container bg-white rounded shadow p-5">
    <div class="text-center mb-5">
      <h2 class="fw-bold">Services</h2>
      <p class="text-muted">What I can do for you</p>
    </div>

    <div id="servicesCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="2500">
      <div class="carousel-inner">
        {% for service in services %}
        <div class="carousel-item {% if forloop.first %}active{% endif %}">
          <div class="row align-items-center">
            <div class="col-md-6 text-center">
              <img src="{{ service.image.url }}" class="img-fluid rounded shadow" alt="{{ service.title }}">
            </div>
            <div class="col-md-6">
              <h3 class="fw-bold">{{ service.title }}</h3>
              <p>{{ service.description }}</p>
              <a href="#contact" class="btn btn-primary mt-3">Hire Me</a>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>

      <!-- Optional Carousel Controls -->
      <button class="carousel-control-prev" type="button" data-bs-target="#servicesCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#servicesCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
  </div>
</section>


<!-- Contact Section -->
<section id="contact" class="py-5">
  <div class="container bg-white rounded shadow p-5">
    <div class="text-center mb-5">
      <h2 class="fw-bold">Contact Me</h2>
      <p class="text-muted">Get in touch</p>
    </div>
    <div class="row justify-content-center">
      <div class="col-md-8">
        <!-- Replace with Django form if needed -->
<form method="post" action="{% url 'home' %}">
  {% csrf_token %}
  {{ form.non_field_errors }}
  <div class="mb-3">
    {{ form.name.label_tag }}
    {{ form.name }}
    {{ form.name.errors }}
  </div>

  <div class="mb-3">
    {{ form.email.label_tag }}
    {{ form.email }}
    {{ form.email.errors }}
  </div>

  <div class="mb-3">
    {{ form.subject.label_tag }}
    {{ form.subject }}
    {{ form.subject.errors }}
  </div>

  <div class="mb-3">
    {{ form.message.label_tag }}
    {{ form.message }}
    {{ form.message.errors }}
  </div>

  <button type="submit" class="btn btn-primary w-100">Send Message</button>
</form>

      </div>
    </div>
  </div>
</section>

<!-- Footer -->
<footer class="footer bg-dark text-white text-center py-4 mt-5">
  <div class="container">
    <h4 class="fw-bold">{{ profile.name }}â€™s Portfolio</h4>
    <p class="mb-3">Crafting backend solutions, AI models, and futuristic apps ðŸš€</p>
    <div class="footer-bottom small">
      Â© 2025 {{ profile.name }} | All Rights Reserved
    </div>
  </div>
</footer>

<!-- Typing effect -->
<script>
  const typedTextSpan = document.getElementById("typed-text");
  const textArray = [
    "{{ profile.title|default:'Backend Developer' }}",
    "Django Expert",
    "App Developer",
    "AI & Automation Enthusiast",
    "Machine Learning Explorer"
  ];
  const typingDelay = 100;
  const erasingDelay = 50;
  const newTextDelay = 2000;
  let textArrayIndex = 0;
  let charIndex = 0;

  function type() {
    if (charIndex < textArray[textArrayIndex].length) {
      typedTextSpan.textContent += textArray[textArrayIndex].charAt(charIndex);
      charIndex++;
      setTimeout(type, typingDelay);
    } else {
      setTimeout(erase, newTextDelay);
    }
  }

  function erase() {
    if (charIndex > 0) {
      typedTextSpan.textContent = textArray[textArrayIndex].substring(0, charIndex - 1);
      charIndex--;
      setTimeout(erase, erasingDelay);
    } else {
      textArrayIndex++;
      if (textArrayIndex >= textArray.length) textArrayIndex = 0;
      setTimeout(type, typingDelay + 500);
    }
  }

  document.addEventListener("DOMContentLoaded", function () {
    if (textArray.length) setTimeout(type, newTextDelay + 250);
  });
</script>

{% endblock %}